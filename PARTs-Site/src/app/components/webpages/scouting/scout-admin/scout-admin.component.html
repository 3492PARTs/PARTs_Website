<app-box [Title]="'Scout Admin'">

  <app-modal [ButtonType]="'main'" [ButtonText]="'Manage Scouts'" [Title]="'Manage Scouts'"></app-modal>

  <app-modal [ButtonType]="'main'" [ButtonText]="'Manage Season'" [Title]="'Manage Season'">
    <app-form-element-group [LabelText]="'Sync/Set Season'" [InlineElements]="true">
      <app-form-element [Type]="'select'" [LabelText]="'Seasons'" [SelectList]="init.seasons"
        [DisplayEmptyOption]="true" [DisplayProperty]="'season'" [BindingProperty]="'season_id'" [(Model)]="season"
        (ModelChange)="buildEventList()">
      </app-form-element>
      <app-form-element [Type]="'select'" [LabelText]="'Events'" [SelectList]="eventList" [DisplayEmptyOption]="true"
        [DisplayProperty]="'event_nm'" [BindingProperty]="'event_id'" [(Model)]="event">
      </app-form-element>
      <app-button *ngIf="season" [ButtonType]="'main'" (FunctionCallBack)="syncSeason()">Sync Season</app-button>
      <app-button *ngIf="season" [ButtonType]="'main'" (FunctionCallBack)="setSeason()">Set Season/Event</app-button>
    </app-form-element-group>

    <app-form-element-group [LabelText]="'Add/Delete Season'" [InlineElements]="true">
      <app-form-element [Type]="'number'" [LabelText]="'Season'" [Width]="'6em'" [(Model)]="newSeason">
      </app-form-element>
      <app-button [ButtonType]="'main'" (FunctionCallBack)="addSeason()">Add Season</app-button>
      <app-form-element [Type]="'select'" [LabelText]="'Seasons'" [SelectList]="init.seasons"
        [DisplayEmptyOption]="true" [DisplayProperty]="'season'" [BindingProperty]="'season_id'" [(Model)]="delSeason">
      </app-form-element>
      <app-button [ButtonType]="'main'" (FunctionCallBack)="deleteSeason()">Delete Season</app-button>
    </app-form-element-group>

    <app-form-element-group [LabelText]="'Response'" *ngIf="syncSeasonResponse.retMessage">
      <p class="word-break">{{syncSeasonResponse.retMessage}}</p>
    </app-form-element-group>
  </app-modal>

  <app-modal [ButtonType]="'main'" [ButtonText]="'Manage Field Questions'" [Title]="'Manage Field Questions'">
    <app-form-element-group [LabelText]="'Add Questions'" [InlineElements]="true" [WrapElements]="true">
      <app-form-element [Type]="'area'" [LabelText]="'Question'" [(Model)]="scoutFieldQuestion.question">
      </app-form-element>
      <app-form-element [Type]="'number'" [LabelText]="'Order'" [(Model)]="scoutFieldQuestion.order" [Width]="'5em'">
      </app-form-element>
      <app-form-element [Type]="'select'" [LabelText]="'Question Type'" [SelectList]="init.questionTypes"
        [DisplayProperty]="'question_typ_nm'" [BindingProperty]="'question_typ'"
        [(Model)]="scoutFieldQuestion.question_typ">
      </app-form-element>

      <app-button [ButtonType]="'main'" (FunctionCallBack)="saveScoutFieldQuestion()">Save</app-button>

      <div *ngIf="scoutFieldQuestion.question_typ === 'select'" class="optionsTableWrapper">
        <app-table [TableCols]="optionsTableCols" [TableData]="scoutFieldQuestion.options" [ShowAddButton]="true"
          (AddRecordCallBack)="addOption(scoutFieldQuestion.options)" [Scrollable]="true">
        </app-table>
      </div>
    </app-form-element-group>

    <app-form-element-group [LabelText]="'Modify Questions'" [InlineElements]="true" [WrapElements]="true">
      <app-form-element [Type]="'select'" [LabelText]="'Question'" [SelectList]="init.scoutFieldQuestions"
        [DisplayProperty]="'question'" [BindingProperty]="'sq_id'" [DisplayEmptyOption]="true"
        [(Model)]="scoutFieldQuestion.sq_id">
      </app-form-element>
      <ng-container *ngFor="let q of init.scoutFieldQuestions">
        <ng-container *ngIf="q.sq_id === scoutFieldQuestion.sq_id">
          <app-form-element [Type]="'area'" [LabelText]="'Question'" [(Model)]="q.question">
          </app-form-element>

          <app-form-element [Type]="'number'" [LabelText]="'Order'" [(Model)]="q.order" [Width]="'5em'">
          </app-form-element>

          <app-form-element [Type]="'select'" [LabelText]="'Question Type'" [SelectList]="init.questionTypes"
            [DisplayProperty]="'question_typ_nm'" [BindingProperty]="'question_typ'" [(Model)]="q.question_typ">
          </app-form-element>
          <p *ngIf="q.active === 'y'">Active</p>
          <p *ngIf="q.active === 'n'">Inactive</p>
          <app-button [ButtonType]="'main'" (FunctionCallBack)="updateScoutFieldQuestion(q)">Update</app-button>
          <app-button [ButtonType]="'danger'" (FunctionCallBack)="deleteScoutFieldQuestion(q)">Toggle Active
          </app-button>

          <div *ngIf="q.question_typ === 'select'" class="optionsTableWrapper">
            <app-table [TableCols]="optionsTableCols" [TableData]="q.options" [ShowAddButton]="true"
              (AddRecordCallBack)="addOption(q.options)" [Scrollable]="true" [ShowEditButton]="true"
              (EditRecordCallBack)="ToggleOption($event)">
            </app-table>
          </div>
        </ng-container>
      </ng-container>
    </app-form-element-group>
  </app-modal>

  <app-modal [ButtonType]="'main'" [ButtonText]="'Manage Pit Questions'" [Title]="'Manage Pit Questions'">
    <app-form-element-group [LabelText]="'Add Questions'" [InlineElements]="true" [WrapElements]="true">
      <app-form-element [Type]="'area'" [LabelText]="'Question'" [(Model)]="scoutPitQuestion.question">
      </app-form-element>
      <app-form-element [Type]="'number'" [LabelText]="'Order'" [(Model)]="scoutPitQuestion.order" [Width]="'5em'">
      </app-form-element>
      <app-form-element [Type]="'select'" [LabelText]="'Question Type'" [SelectList]="init.questionTypes"
        [DisplayProperty]="'question_typ_nm'" [BindingProperty]="'question_typ'"
        [(Model)]="scoutPitQuestion.question_typ">
      </app-form-element>

      <app-button [ButtonType]="'main'" (FunctionCallBack)="saveScoutPitQuestion()">Save</app-button>

      <div *ngIf="scoutPitQuestion.question_typ === 'select'" class="optionsTableWrapper">
        <app-table [TableCols]="optionsTableCols" [TableData]="scoutPitQuestion.options" [ShowAddButton]="true"
          (AddRecordCallBack)="addOption(scoutPitQuestion.options)" [Scrollable]="true">
        </app-table>
      </div>
    </app-form-element-group>

    <app-form-element-group [LabelText]="'Modify Questions'" [InlineElements]="true" [WrapElements]="true">
      <app-form-element [Type]="'select'" [LabelText]="'Question'" [SelectList]="init.scoutPitQuestions"
        [DisplayProperty]="'question'" [BindingProperty]="'sq_id'" [DisplayEmptyOption]="true"
        [(Model)]="scoutPitQuestion.sq_id">
      </app-form-element>
      <ng-container *ngFor="let q of init.scoutPitQuestions">
        <ng-container *ngIf="q.sq_id === scoutPitQuestion.sq_id">
          <app-form-element [Type]="'area'" [LabelText]="'Question'" [(Model)]="q.question">
          </app-form-element>

          <app-form-element [Type]="'number'" [LabelText]="'Order'" [(Model)]="q.order" [Width]="'5em'">
          </app-form-element>

          <app-form-element [Type]="'select'" [LabelText]="'Question Type'" [SelectList]="init.questionTypes"
            [DisplayProperty]="'question_typ_nm'" [BindingProperty]="'question_typ'" [(Model)]="q.question_typ">
          </app-form-element>
          <p *ngIf="q.active === 'y'">Active</p>
          <p *ngIf="q.active === 'n'">Inactive</p>
          <app-button [ButtonType]="'main'" (FunctionCallBack)="updateScoutPitQuestion(q)">Update</app-button>
          <app-button [ButtonType]="'danger'" (FunctionCallBack)="deleteScoutPitQuestion(q)">Toggle Active
          </app-button>

          <div *ngIf="q.question_typ === 'select'" class="optionsTableWrapper">
            <app-table [TableCols]="optionsTableCols" [TableData]="q.options" [ShowAddButton]="true"
              (AddRecordCallBack)="addOption(q.options)" [Scrollable]="true" [ShowEditButton]="true"
              (EditRecordCallBack)="ToggleOption($event)">
            </app-table>
          </div>
        </ng-container>
      </ng-container>
    </app-form-element-group>
  </app-modal>
</app-box>
