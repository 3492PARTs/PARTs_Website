<app-table
  [TableCols]="questionAggregatesTableCols"
  [TableData]="questionAggregates"
  [Width]="'100%'"
  [ShowAddButton]="true"
  (AddRecordCallBack)="showQuestionAggregateModal()"
  [ShowEditButton]="true"
  (EditRecordCallBack)="showQuestionAggregateModal($event)"
></app-table>

<app-modal
  [Title]="'Field Question Aggregate'"
  [(visible)]="questionAggregateModalVisible"
  [MaxWidth]="'500px'"
>
  <app-form (SubmitFunction)="saveQuestionAggregate()">
    <app-form-element
      [Type]="'text'"
      [LabelText]="'Name'"
      [(Model)]="activeQuestionAggregate.field_name"
      [Required]="true"
    ></app-form-element>

    <app-form-element
      [Type]="'select'"
      [LabelText]="'Aggregate Function'"
      [(Model)]="activeQuestionAggregate.question_aggregate_typ"
      [Required]="true"
      [SelectList]="questionAggregateTypes"
      [DisplayProperty]="'question_aggregate_nm'"
      [SelectComparatorFunction]="compareQuestionAggregateTypes"
    ></app-form-element>

    <app-form-element
      [Type]="'checkbox'"
      [LabelText]="'Active'"
      [(Model)]="activeQuestionAggregate.active"
      [TrueValue]="'y'"
      [FalseValue]="'n'"
    ></app-form-element>

    <div class="flex align-items-baseline justify-content-flex-end">
      <div class="overflow-hidden">
        <app-form-element
          [Type]="'select'"
          [LabelText]="'Question'"
          [(Model)]="questionToAddToAgg"
          [SelectList]="questionAggQuestionList"
          [DisplayProperty]="'display_value'"
        >
        </app-form-element>
      </div>

      <app-button
        [ButtonType]="'add'"
        (FunctionCallBack)="addQuestionToAggregate()"
      ></app-button>
    </div>

    <app-table
      [TableCols]="questionAggregateQuestionsTableCols"
      [TableData]="activeQuestionAggregate.questions"
      [Width]="'100%'"
      [ShowRemoveButton]="true"
      (RemoveRecordCallBack)="removeQuestionFromAggregate($event)"
      [Scrollable]="true"
    ></app-table>

    <app-button-ribbon>
      <app-button [ButtonType]="'success'" [Type]="'submit'">Save</app-button>
    </app-button-ribbon>
  </app-form>
</app-modal>
