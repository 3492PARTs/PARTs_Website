<app-box [Title]="'Portal'">

  <app-form-element-group [LabelText]="'Full Scouting Schedule'" *ngIf="users">
    <app-table [TableCols]="expandedScoutFieldScheduleTableCols" [TableData]="schedules.field_schedule"
      [Scrollable]="true" [EnableFilter]="true">
    </app-table>
  </app-form-element-group>

  <ng-container *ngIf="users">
    <app-form-element-group [LabelText]="'All Subgroup Schedules'">
      <app-table *ngFor="let sch of scheduleByType" [TableTitle]="sch.sch_typ.sch_nm"
        [TableCols]="expandedScheduleTableCols" [TableData]="sch.schedule" [Scrollable]="true" [ShowAddButton]="true"
        (AddRecordCallBack)="showScoutScheduleModal(sch.sch_typ)" [ShowEditButton]="true"
        (EditRecordCallBack)="showScoutScheduleModal(sch.sch_typ, $event)" [EnableFilter]="true">
      </app-table>

      <app-modal [(visible)]="scheduleModalVisible" [Title]="'Schedule'">
        <app-form>
          <app-form-element-group>
            <app-form (SubmitFunction)="saveScheduleEntry()">
              <app-form-element [LabelText]="'User'" [FormGroup]="true" [Type]="'select'" [SelectList]="users"
                [DisplayProperty]="'first_name'" [DisplayProperty2]="'last_name'" [DisplayEmptyOption]="true"
                [(Model)]="currentSchedule.user" [FormGroupInline]="true"
                [SelectComparatorFunction]="compareUserObjects" [Required]="true">
              </app-form-element>

              <app-form-element [LabelText]="'Type'" [FormGroup]="true" [Type]="'select'"
                [SelectList]="schedules.schedule_types" [DisplayProperty]="'sch_nm'" [BindingProperty]="'sch_typ'"
                [(Model)]="currentSchedule.sch_typ" [FormGroupInline]="true" [Required]="true">
              </app-form-element>

              <app-form-element [Type]="'datetime'" [FormGroup]="true" [LabelText]="'Start Time'"
                [(Model)]="currentSchedule.st_time" (FunctionCallBack)="setEndTime()" [Required]="true">
              </app-form-element>
              <app-form-element [Type]="'datetime'" [FormGroup]="true" [LabelText]="'End Time'"
                [(Model)]="currentSchedule.end_time" [Required]="true">
              </app-form-element>

              <app-form-element *ngIf="currentSchedule.sch_id" [Type]="'checkbox'" [FormGroup]="true"
                [LabelText]="'Delete?'" [(Model)]="currentSchedule.void_ind" [TrueValue]="'y'" [FalseValue]="'n'">
              </app-form-element>

              <app-button-ribbon>
                <app-button *ngIf="currentSchedule.sch_id" [ButtonType]="'warning'"
                  (FunctionCallBack)="notifyUser(currentSchedule.sch_id)">
                  Notify</app-button>
                <app-button *ngIf="currentSchedule.sch_id" [ButtonType]="'main'"
                  (FunctionCallBack)="copyScoutScheduleEntry()">Copy</app-button>
                <app-button [ButtonType]="'main'" [Type]="'submit'">Save
                </app-button>
              </app-button-ribbon>
            </app-form>
          </app-form-element-group>
        </app-form>
      </app-modal>
    </app-form-element-group>
  </ng-container>

  <app-form-element-group [LabelText]="'Your Scouting Schedule'">
    <div *ngIf="fieldSchedule.length <= 0">
      <p>You do not currently have any scheduled scouting.</p>
    </div>

    <app-table *ngIf="fieldSchedule.length > 0" [TableCols]="scoutFieldScheduleTableCols" [TableData]="fieldSchedule"
      [Scrollable]="true">
    </app-table>
  </app-form-element-group>

  <app-form-element-group [LabelText]="'Your Pit Schedule'">
    <div *ngIf="schedule.length <= 0">
      <p>You do not currently have any scheduled pit times.</p>
    </div>

    <app-table *ngIf="schedule.length > 0" [TableCols]="scheduleTableCols" [TableData]="schedule" [Scrollable]="true">
    </app-table>
  </app-form-element-group>

</app-box>