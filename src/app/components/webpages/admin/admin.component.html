<app-box [Title]="'Admin'">
  <app-modal [ButtonType]="'main'" [ButtonText]="'Manage Users'" [Title]="'Manage Users'">
    <app-table [TableCols]="userTableCols" [TableData]="init.users" [Scrollable]="true" [ShowEditButton]="true"
      (EditRecordCallBack)="showManageUserModal($event)">
    </app-table>

    <app-modal [Title]="'Manage User: ' + activeUser.first_name + ' ' + activeUser.last_name"
      [(visible)]="manageUserModalVisible">
      <app-header [h]="3">User Groups</app-header>
      <div class="flex">
        <div>
          <app-form-element [Type]="'text'" [LabelText]="'First Name:'" [(Model)]="activeUser.first_name"
            [FormGroupInline]="true">
          </app-form-element>
          <app-form-element [Type]="'text'" [LabelText]="'Last Name:'" [(Model)]="activeUser.last_name"
            [FormGroupInline]="true">
          </app-form-element>
          <app-form-element [Type]="'text'" [LabelText]="'Phone Number:'" [(Model)]="activeUser.phone"
            [FormGroupInline]="true">
          </app-form-element>
          <app-form-element [Type]="'select'" [LabelText]="'Carrier:'" [FormGroupInline]="true"
            [(Model)]="activeUser.phone_type" [SelectList]="init.phoneTypes" [BindingProperty]="'phone_type_id'"
            [DisplayProperty]="'carrier'" [DisplayEmptyOption]="true">
          </app-form-element>
        </div>
        <div>
          <app-form-element [Type]="'select'" [LabelText]="'Group:'" [FormInline]="true" [FormGroupInline]="true"
            [(Model)]="newAuthGroup.id" [SelectList]="availableAuthGroups" [BindingProperty]="'id'"
            [DisplayProperty]="'description'" [DisplayEmptyOption]="true">
          </app-form-element>
          <app-button [ButtonType]="'add'" (FunctionCallBack)="addUserGroup()"></app-button>
        </div>
      </div>
      <app-table [TableCols]="userGroupsTableCols" [TableData]="userGroups" [Scrollable]="true"
        [ShowRemoveButton]="true" (RemoveRecordCallBack)="removeUserGroup($event)"></app-table>

      <app-button-ribbon>
        <app-button [ButtonType]="'main'" (FunctionCallBack)="saveUser()">Save</app-button>
      </app-button-ribbon>
    </app-modal>
  </app-modal>

  <app-modal [ButtonType]="'main'" [ButtonText]="'Error Log'" [Title]="'Error Log'">
    <app-table [TableCols]="errorTableCols" [TableData]="errors" [Scrollable]="true" [Responsive]="true">
    </app-table>

    <nav>
      <ul class="pagination">
        <li class="page-item" [ngClass]="{'disabled': !pageInfo.previous}">
          <p class="page-link" aria-label="Previous" (click)="getErrors(pageInfo.previous ? pageInfo.previous : 1)">
            <span aria-hidden="true">&laquo;</span>
          </p>
        </li>
        <li class="page-item" *ngFor="let pg of pages">
          <p class="page-link" [ngClass]="{'active': pg === page}" (click)="getErrors(pg)">{{ pg }}</p>
        </li>
        <li class="page-item" [ngClass]="{'disabled': !pageInfo.next}">
          <p class="page-link" aria-label="Next" (click)="getErrors(pageInfo.next ? pageInfo.next : pageInfo.count)">
            <span aria-hidden="true">&raquo;</span>
          </p>
        </li>
      </ul>
    </nav>
  </app-modal>
</app-box>
