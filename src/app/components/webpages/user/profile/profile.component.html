<app-box [Title]="'Welcome ' + user.first_name + '!'">
  <div id="profile-header">
    <div id="profile-picture">
      <img [src]="user.image ? user.image : '../../../../../assets/icons/BeanieBot40x40.png'">
      <div id="profile-edit-btn">
        <app-button [ButtonType]="'edit'" (FunctionCallBack)="openEditProfileImageModal()"></app-button>
      </div>
    </div>
  </div>
</app-box>

<app-modal [Title]="'Edit Profile Image'" [(visible)]="editProfileImageModalVisible">
  <app-form-element *ngIf="!showCropper" [Type]="'image'" [LabelText]="'Profile Image'"
    [ImageChangeEvent]="fileChangeEvent.bind(this)">
  </app-form-element>



  <div id="cropper-wrapper">
    <div *ngIf="editProfileImageModalVisible" id="cropper-size" #EditProfileImageModalCropper>
      <image-cropper *ngIf="showCropper" [imageChangedEvent]="imageChangedEvent" [maintainAspectRatio]="true"
        [aspectRatio]="1 / 1" format="png" (imageCropped)="imageCropped($event)" (imageLoaded)="imageLoaded()"
        (cropperReady)="cropperReady()" (loadImageFailed)="loadImageFailed()" [roundCropper]="true"></image-cropper>
    </div>

    <app-button-ribbon [ngStyle]="{'visibility': showCropper ? 'visible' : 'hidden'}"
      #EditProfileImageModalButtonRibbon>
      <app-button [ButtonType]="'main'" (FunctionCallBack)="saveProfile()">Save</app-button>
    </app-button-ribbon>
  </div>
</app-modal>

<app-box [Title]="'General'" [Collapsible]="true" [Collapsed]="true">
  <app-form>
    <app-form-element [Type]="'text'" [(Model)]="editUser.first_name" [LabelText]="'First Name'">
    </app-form-element>

    <app-form-element [Type]="'text'" [(Model)]="editUser.last_name" [LabelText]="'Last Name'">
    </app-form-element>

    <app-form-element [Type]="'text'" [(Model)]="editUser.email" [LabelText]="'Email'">
    </app-form-element>



    <app-button-ribbon>
      <app-button [ButtonType]="'main'" (FunctionCallBack)="saveProfile()">Save</app-button>
    </app-button-ribbon>
  </app-form>
</app-box>

<app-box [Title]="'Security and Login'" [Collapsible]="true" [Collapsed]="true">
  <app-form>
    <app-form-element [Type]="'password'" [(Model)]="input.password" [Placeholder]="'password'" [Width]="'100%'">
    </app-form-element>
    <br>
    <app-form-element [Type]="'password'" [(Model)]="input.passwordConfirm" [Placeholder]="'confirm password'"
      [Width]="'100%'">
    </app-form-element>
    <br>
    <p class="matching-pass">
      <span class="do-not-match"
        [ngClass]="{ hide : gs.strNoE(input.password) || input.password === input.passwordConfirm }">passwords do not
        match</span>
      <span class="do-match"
        [ngClass]="{ hide : input.password !== input.passwordConfirm || gs.strNoE(input.password) }">passwords
        match</span>
    </p>



    <app-button-ribbon>
      <app-button [ButtonType]="'main'" (FunctionCallBack)="saveProfile()">Save</app-button>
    </app-button-ribbon>
  </app-form>
</app-box>